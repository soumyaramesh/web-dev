<!DOCTYPE html>
<html>
<head>
    <title>NodeJS Select and Details</title>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script src="javascript/angular.js"></script>
    <script src="javascript/angular-sanitize.js"></script>
    <script src="javascript/angular-route.js"></script>
    <script src="javascript/angular-route.min.js"></script>
    <script src="javascript/app.js"></script>
    <script src="javascript/services.js"></script>
    <script src="javascript/controller.js"></script>
</head>

<body ng-app="F1FeederApp" ng-controller="driversController" style="background-color: peachpuff">


    <h1 style="color:palevioletred"> Select and Details</h1>
    <div class="container-fluid" style="border:2px solid; width:700px; height:600px; border-radius:30px">
        <a href="http://nodejs-soumyaramesh.rhcloud.com/exp3.html"> <h4>Click Here to see the Output</h4></a>  </br></br>
        <img src="../images/week6_3.jpg" alt="exp3 Output">
    </div>
    <fieldset>
        <h3>About the Experiment</h3>
        <p>This experiment is an extension of the previous experiment where I have added a new button to select and edit a particular book. When this button is clicked, it's value is copied onto the form, this is known as copy by reference.
        <p>Additionally, when a book is selected, its chapters are displayed below in the form of a table. Note that chapters is a nested list within the books JSON and I iterate through this inner list and display it as a table.</p>

    </fieldset>
    <br />

    <h3>Code Snippet:</h3>

    <pre style="background-color:palegoldenrod">
        
    <code>
<strong>exp3.html</strong>
&lt;div ng-show="selectedIndex != null"&gt;
   You have selected the book {{book.title}}
      Chapters:
        &lt;table class="table-bordered&gt;
        &lt;tbody&gt;
          &lt;tr ng-repeat="chapter in book.chapters"&gt;
            &lt;td&gt;{{chapter.name}}&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/tbody&gt;
       &lt;/table&gt;
  &lt;/div&gt;

<strong>server.js</strong>
app.get("/book/:index", function (req, res) {
    var ind = req.params.index;
    res.json(books[ind]);
})

<strong>clientApp.js</strong>
$scope.selectedIndex = null;
$scope.select = function (index) {
    $scope.selectedIndex = index;
    $scope.book = $scope.books[index]
    }


        </code>
        </pre>
    </p>


    <h4>Description</h4>
    <div style="background-color:beige" class="container-fluid">
        <p>The details section with the chapters is shown only when a book is selected. This is checked by div ng-show="selectedIndex != null". <br/>
         If a book is selected, the name of the book and it's chapters are listed in a table.</p>
        <p>The index of the book that is clicked is obtained by app.get("/book/:index") where the server is waiting for the index of the book which is captured through req.params.index.</p>
        <p>The select handler is invoked when the button is clicked which retrieves the selectedIndex.</p>

    </div>
    <fieldset>
        <h3>Source Code</h3>
        <a href="../../fileview/Default.aspx?~/experiments/week6/experiment3.htm" target="_blank">experiment3.htm</a><br />
        <a href="../../fileview/Default.aspx?~/experiments/week6/server.js" target="_blank">server.js</a><br />
        <a href="../../fileview/Default.aspx?~/experiments/week6/clientApp.js" target="_blank">clientApp.js</a>
    </fieldset>
    <fieldset>
        <h3>References</h3>
        <nav>
            <a href="https://www.youtube.com/user/jannunzi" target="_blank">Prof Jose's Lectures</a>
            <br />
        </nav>
    </fieldset>
    <br />

</body>
</html>