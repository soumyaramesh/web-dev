<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <meta name="viewport"
          content="initial-scale=1, minimum-scale=1">


    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <script src="javascript/angular.js"></script>
    <script src="javascript/angular-sanitize.js"></script>
    <script src="javascript/angular-route.js"></script>
    <script src="javascript/angular-route.min.js"></script>


    <script src="javascript/exp1.js" type="text/javascript"></script>

    <title> Upvote and Downvote Comment </title>



</head>

<body style="background-color:aliceblue" ng-app="RoutingApp">

    <h1 style="color:rosybrown;text-align:center ">Upvote and Downvote Comment</h1>
    <br />


    <h4>About the Experiment</h4>
    <p>
        In this experiment, I have created the functionality for an authenticated logged in user to upvote or downvote a comment. I have added two bootstrap glyphicons for the upvote and downvote symbols.
    </p>

    <div class="container-fluid">
        <h4>Code Snippet:</h4>

<pre style="font-size:16px">
<strong>postinfoApp.js</strong>
     $scope.incrementCommentUpvotes = function (comment) {
        $http.put('/comment/' + comment._id + '/uvote')
        .success(function (response) {
            comment.upvotes += 1
        });
    }
    $scope.decrementCommentUpvotes = function (comment) {
        $http.put('/comment/' +  comment._id + '/dvote')
        .success(function (response) {
            comment.upvotes -= 1
        });
    }
</pre>

<strong>postinfo.html</strong>
        <xmp>
            <div ng-repeat="comment in post.comments | orderBy:'-upvotes'">

                <span class="glyphicon glyphicon-upload"
                      ng-click="incrementCommentUpvotes(comment)"></span>
                <span class="glyphicon glyphicon-download"
                      ng-click="decrementCommentUpvotes(comment)"></span>
                {{comment.upvotes}}
                <span style="font-size:20px; margin-left:10px;">
                    {{comment.commentbody}}
                </span>
                <div>
                    <a href="#/rest/user/{{comment.author}}" ng-click="getUserById(comment.author)"> {{comment.author}}</a>
                </div>

            </div>
            </xmp>
    <div class="container-fluid">

        <h4>Description :</h4>
        <br />
        <p>
            When the upvote icon is clicked, the incrementCommentUpvotes(comment) is invoked which inturn sends a get request which retrieves the comment based on the id of the comment and updates the upvote value by adding 1 to it.
            <br />
            Similarly, When the downvote icon is clicked, the decrementCommentUpvotes(comment) is invoked which inturn sends a get request which retrieves the comment based on the id of the comment and updates the upvote value by subtracting 1 from it.
        </p>
    </div>





    <h3>Source Code</h3>
        <a href="../../fileview/Default.aspx?~/experiments/week10/experiment5.htm" target="_blank">experiment5.htm</a><br />
        <a href="../../fileview/Default.aspx?~/experiments/week10/views/postinfo/postinfo.html" target="_blank">postinfo.html</a><br />
        <a href="../../fileview/Default.aspx?~/experiments/week10/views/postinfo/postinfoApp.js" target="_blank">postinfoApp.js</a><br />
    <a href="../../fileview/Default.aspx?~/experiments/week10/server.js" target="_blank">server.js</a><br />

    <h2>References</h2>
    <a href="https://www.youtube.com/user/jannunzi" target="_blank">Professor Jose's Lectures</a> </br>
    <hr />






</body>
</html>
